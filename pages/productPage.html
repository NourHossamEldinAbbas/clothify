<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clothify - Product Details</title>
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="../assets/js/components.js"></script>
    <script src="../assets/js/data.js"></script>
    <script src="../assets/js/clickOnProducts.js"></script>

    <style>
      /* Color picker styles */
      input[type="radio"][name="color"] {
        display: none;
      }

      input[type="radio"][name="color"]:checked + .color-circle {
        outline: 3px solid;
        outline-offset: 2px;
      }

      input[type="radio"][name="color"][value="white"]:checked + .color-circle {
        outline-color: #ffffff;
      }

      input[type="radio"][name="color"][value="gray"]:checked + .color-circle {
        outline-color: #6b7280;
      }

      input[type="radio"][name="color"][value="black"]:checked + .color-circle {
        outline-color: #000000;
      }

      input[type="radio"][name="color"][value="brown"]:checked + .color-circle {
        outline-color: #b45309;
      }

      .color-label {
        cursor: pointer;
        transition: transform 0.2s;
      }

      .color-label:hover {
        transform: scale(1.1);
      }

      .color-label:active {
        transform: scale(0.95);
      }

      .color-circle {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        transition: outline 0.2s;
      }
    </style>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "dark-slate-grey": "#1E4447",
              "old-lace": "#F8F1E1",
              "old-lace-2": "#F6F0E3",
              "old-lace-3": "#F7F0E0",
            },
            backgroundImage: {
              "gradient-custom": "linear-gradient(90deg, #1E4447, #294340)",
              "gradient-custom-light": "linear-gradient(90deg, #294, #294)",
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"],
              serif: ["Playfair Display", "serif"],
            },
          },
        },
      };
    </script>
  </head>
  <body
    class="bg-old-lace text-dark-slate-grey font-sans antialiased flex flex-col min-h-screen"
  >
    <div id="navbar-placeholder"></div>

    <main class="container mx-auto px-4 py-10 flex-grow">
      <div
        id="product-container"
        class="grid grid-cols-1 lg:grid-cols-2 gap-12"
      >
        <div class="col-span-2 text-center py-20">
          <i
            class="fa-solid fa-spinner fa-spin text-4xl text-dark-slate-grey"
          ></i>
        </div>
      </div>
    </main>

    <div id="footer-placeholder"></div>

    <script>
      // Get Product ID from URL (e.g., productPage.html?id=2)
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get("id") || 4;

      const product = getProductById(productId);
      const about = getAboutThisItem(productId);

      const container = document.getElementById("product-container");

      if (product) {
        container.innerHTML = `
                <div class="space-y-4">
                    <div class="aspect-[3/4] rounded-2xl overflow-hidden shadow-lg border border-dark-slate-grey/10 relative">
                        <img src="${product.image}" alt="${
          product.name
        }" class="w-full h-full object-cover">
                        ${
                          product.sale_price
                            ? `<div class="absolute top-4 left-4 bg-red-600 text-white px-3 py-1 font-bold rounded">-Sale</div>`
                            : ""
                        }
                    </div>
                </div>
                

                <div class="flex flex-col justify-center">
                    <div class="mb-2 text-sm text-dark-slate-grey/60 font-bold uppercase tracking-widest">
                        ${product.category} / ${product.material}
                </div>

                <div class="flex flex-row justify-between items-center mb-1">
                    <h1 class="text-4xl md:text-5xl font-serif font-bold text-dark-slate-grey mb-4">
                        ${product.name}
                    </h1>
                    <div class="flex items-center gap-4 mb-6 mt-2 ml-3 text-3xl">
                        ${
                          product.sale_price
                            ? `<span class="font-bold text-red-600">${product.sale_price} EGP</span>
                               <span class="line-through text-dark-slate-grey/40">${product.price} EGP</span>`
                            : `<span class="font-bold text-dark-slate-grey">${product.price} EGP</span>`
                        }
                    </div>
                </div>
                  <!-- Factory Name -->
                <div>
                   <h1 class="text-lg md:text-lg font-serif font-bold text-dark-slate-grey/80 mb-4 ">
                        ${product.factory_name}
                    </h1>
                </div>

                  <div class="mb-3">
                    <h1 class="text-lg md:text-xl font-serif text-dark-slate-grey/80 mb-4">
                        Color
                    </h1>
                    <fieldset aria-label="Choose a color" class="mt-4">
                        <div class="flex items-center gap-5">
                          <label class="color-label">
                            <input type="radio" name="color" value="white" />
                            <div class="color-circle" style="background-color: #ffffff; border: 1px solid #d1d5db;"></div>
                          </label>
                          
                          <label class="color-label">
                            <input type="radio" name="color" value="gray" />
                            <div class="color-circle" style="background-color: #d1d5db;"></div>
                          </label>
                          
                          <label class="color-label">
                            <input type="radio" name="color" value="black" />
                            <div class="color-circle" style="background-color: #000000;"></div>
                          </label>
                          
                          <label class="color-label">
                            <input type="radio" name="color" value="brown" />
                            <div class="color-circle" style="background-color: #b45309;"></div>
                          </label>
                        </div>
                    </fieldset>
                    </div>

                    <div class="mt-5 mb-8">
                      <div class="flex items-center justify-between">
                        <h3 class="text-lg md:text-xl font-serif text-dark-slate-grey/80 mb-3">Size</h3>
                        <a href="#" class="text-sm font-medium text-dark-slate-grey hover:text-black">Size guide</a>
                      </div>
                    
                      <fieldset aria-label="Choose a size" class="mt-4">
                        <div class="grid grid-cols-4 gap-3">

                          <label class="cursor-pointer">
                            <input type="radio" name="size" value="S" class="sr-only peer" disabled />
                            <div class="flex items-center justify-center rounded-md border border-gray-300 bg-white p-3 text-sm font-medium uppercase
                                        peer-checked:bg-dark-slate-grey peer-checked:border-dark-slate-grey peer-checked:text-white
                                        hover:scale-105 transition-transform peer-disabled:opacity-50 peer-disabled:cursor-not-allowed">
                              S
                            </div>
                          </label>
                        
                          <label class="cursor-pointer">
                            <input type="radio" name="size" value="M" class="sr-only peer" />
                            <div class="flex items-center justify-center rounded-md border border-gray-300 bg-white p-3 text-sm font-medium uppercase
                                        peer-checked:bg-dark-slate-grey peer-checked:border-dark-slate-grey peer-checked:text-white
                                        hover:scale-105 transition-transform">
                              M
                            </div>
                          </label>
                        
                          <label class="cursor-pointer">
                            <input type="radio" name="size" value="L" class="sr-only peer" />
                            <div class="flex items-center justify-center rounded-md border border-gray-300 bg-white p-3 text-sm font-medium uppercase
                                        peer-checked:bg-dark-slate-grey peer-checked:border-dark-slate-grey peer-checked:text-white
                                        hover:scale-105 transition-transform">
                              L
                            </div>
                          </label>

                          <label class="cursor-pointer">
                            <input type="radio" name="size" value="XL" class="sr-only peer" />
                            <div class="flex items-center justify-center rounded-md border border-gray-300 bg-white p-3 text-sm font-medium uppercase
                                        peer-checked:bg-dark-slate-grey peer-checked:border-dark-slate-grey peer-checked:text-white
                                        hover:scale-105 transition-transform">
                              XL
                            </div>
                          </label>
                        </div>
                      </fieldset>
                    </div>

                    <div class="flex gap-4 mb-8">
                        <button id="add-to-cart-product-page" class="flex-1 bg-gradient-custom text-old-lace py-4 rounded-lg font-bold shadow-lg hover:opacity-90 transition-opacity">
                            Add to Cart
                        </button>
                        <button class="flex-1 bg-gradient-custom-light text-old-lace py-4 rounded-lg font-bold shadow-lg hover:opacity-90 transition-opacity">
                            Buy Now
                        </button>
                    </div>

                    <p class="text-lg md:text-xl font-serif text-dark-slate-grey mb-4">
                        Description
                    </p>
                    <p class="text-dark-slate-grey/80 leading-relaxed mb-8">
                        ${product.description}
                    </p>
                    <hr class="border-dark-slate-grey/20 mb-8" />

                      <div class="text-dark-slate-grey leading-relaxed mb-8">
                        <div class="text-lg md:text-xl font-serif text-dark-slate-grey mb-4">
                            Fabric & Care
                          </div>
                              ${about}
                      </div>
                    </div>
                </div>
            `;

        // Add event listener to the "Add to Cart" button
        const addToCartBtn = document.getElementById(
          "add-to-cart-product-page"
        );
        if (addToCartBtn) {
          addToCartBtn.addEventListener("click", () => {
            const numberOfProductsElement =
              document.querySelector(".numberOfProducts");
            let currentCount =
              parseInt(numberOfProductsElement.textContent) || 0;
            currentCount += 1;
            numberOfProductsElement.textContent = currentCount;
            localStorage.setItem("cartCount", currentCount);
            addToCart(product);
          });
        }
      } else {
        container.innerHTML = `<div class="col-span-2 text-center text-red-500 font-bold">Product not found.</div>`;
      }
    </script>
  </body>
</html>